{% extends "_base.html" %}
{% load widget_tweaks %}

{% block content %}
<!--Filter Form-->
<form method="get" action="#" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-3">
    {% csrf_token %}
    {{ filter.form }}
    <button type="submit" class="btn btn-warning sm:w-44">Αναζήτηση</button>
</form>
<!--End Filter Form-->

<div class="divider divider-primary"></div>

<!--Buttons-->
<div class="flex flex-col sm:flex-row sm:space-x-1 space-y-1 sm:space-y-0 mt-3">
    <button onclick="openStaffVacationModal()" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">Νέα εγγραφή</button>
    <a href="#" class="text-center lg:text-left text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-green-600 dark:hover:bg-green-700 focus:outline-none dark:focus:ring-green-800">Εξαγωγή<a/>
</div>
<!--End Buttons-->

{% comment %} {% if vacations_empty %}
<div class="mt-10 text-center font-mono text-lg font-bold">
  <p>No vacations found.</p>
</div>
{% else %} {% endcomment %}
<div class="relative overflow-x-auto shadow-md sm:rounded-lg mt-5">
  <div class="hidden sm:block">
    <table class="w-full text-sm text-center rtl:text-right text-gray-500 dark:text-gray-400">
      <thead class="text-xs odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700">
                  <tr>
                    <th colspan="5" class="text-center">Άδειες Προσωπικού</th>
                  </tr>
                  <tr>
                      <th scope="col" class="px-6 py-3">Καθηγητής</th>
                      <th scope="col" class="px-6 py-3">Έναρξη</th>
                      <th scope="col" class="px-6 py-3">Λήξη</th>
                      <th scope="col" class="px-6 py-3">Ημέρες</th>
                      <th scope="col" class="px-6 py-3">Ενέργειες</th>
                  </tr>
        </thead>
        <tbody>
        {% for vacation in vacations %}
        <tr class="odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700">
        <td class="px-6 py-4" data-label="Ονοματεπώνυμο"><a href="">{{ user.first_name }} {{ user.last_name }}</a></td>
        <td class="px-6 py-4" data-label="Εταιρεία">{{ vacation.start_date|date:"d M Y" }}</td>
        <td class="px-6 py-4" data-label="Εταιρεία">{{ vacation.end_date|date:"d M Y" }}</td>
        <td class="px-6 py-4" data-label="Εταιρεία">{{ vacation.days }}</td>
        <td class="px-6 py-4" data-label="Ενέργειες">
            <a href="#" class="font-medium text-blue-600 dark:text-blue-500 hover:underline px-2">Edit</a>
            <a href="#" class="font-medium text-red-600 dark:text-red-500 hover:underline">Delete</a></td>
        {% empty %}
          <tr>
            <td colspan="4" class="border px-4 py-2 text-center">No courses available</td>
          </tr>
        {% endfor %}
        </tbody>
    </table>
  </div>
    <div class="block sm:hidden space-y-4">
          {% for vacation in vacations %}
          <div class="border p-4 rounded-lg shadow-md bg-white">
              <p><span class="font-bold text-gray-700">Καθηγητής:</span> {{ user.first_name }} {{ user.last_name }}</p>
              <p><span class="font-bold text-gray-700">Έναρξη:</span>{{ vacation.start_date|date:"d M Y" }}</p>
              <p><span class="font-bold text-gray-700">Λήξη:</span> {{ vacation.end_date|date:"d M Y" }}</p>
              <p><span class="font-bold text-gray-700">Ημέρες:</span> {{ vacation.days }}</p>
          </div>
          {% endfor %}
          </div>
</div>
<!-- Modal Container -->
        <div id="staff-vacation-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden justify-center items-center">
            <div class="bg-white p-6 rounded-lg shadow-lg w-1/3 relative">
                <!-- Close Button -->
                <button class="absolute top-2 right-2 text-red-600 font-bold text-2xl px-4 py-2 rounded-md focus:outline-none" onclick="closeStaffVacationModal()">✕</button>

                <!-- Form -->
                <h2 class="text-lg font-bold mb-4 text-gray-700">Καταχώρηση άδειας</h2>
                <form method="POST">
                    <div class="space-y-4">
                    {% csrf_token %}
                    {{ form.as_p }}
                    <div class="mt-4 flex justify-end">
                        <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-opacity-50">Αποθήκευση</button>
                    </div>
                    <p class="text-left text-gray-700" >* Ο αριθμός ημερών άδειας υπολογίζεται αυτόματα</p>
                </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        function openStaffVacationModal() {
            document.getElementById("staff-vacation-modal").classList.remove("hidden");
            document.getElementById("staff-vacation-modal").classList.add("flex");
        }

        function closeStaffVacationModal() {
            document.getElementById("staff-vacation-modal").classList.remove("flex");
            document.getElementById("staff-vacation-modal").classList.add("hidden");
        }
    </script>
{% endblock %}